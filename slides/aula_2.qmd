---
title: "Aula 2 - Gerenciamento de Dados"
subtitle: "Introdu√ß√£o ao aprendizado de m√°quina - UEMA 2025"
author: "Thiago S. F .Silva"
date: 2025-12-10
format: 
    beamer:
        theme: metropolis
        linkcolor: blue
        classoption: '`xcolor={dvipsnames}`{=latex}'
        
---

# Aquecimento: dado vs informa√ß√£o?

## Gerenciamento de dados

- Usabilidade

- Reproducibilidade

- Transpar√™ncia

- Praticidade

Quem √© o seu principal colaborador?

 . . . 

- Voc√™ mesmo daqui a 3 meses.


## Dados estruturados vs. n√£o-estruturados

- **Dados Estuturados:** planilhas, bancos de dados - dados organizados de maneira tabular.

- **Dados N√£o-Estruturados:** fotos, grava√ß√µes, transcri√ß√µes de entrevistas, paginas da web, etc. 

## Metadados

**Metadado:** O dado sobre o dado. Informa√ß√£o adicional / documenta√ß√£o explicativa que permite o uso correto e reproduz√≠vel dos dados. 

- Especialmente importante para dados n√£o estruturados. 

- Ex: Data, hora, local, coletor, instrumento, condi√ß√µes ambientais, unidades, nomes de vari√°veis, nomenclatura dos arquivos, organiza√ß√£o das pastas. etc.

Exemplo: exemplo_metadado.txt

Exemplo: [https://zenodo.org/records/13887881](https://zenodo.org/records/13887881)

## O gerenciamento de dados come√ßa no campo/laborat√≥rio

- Protocolo de amostragem

- Caderno de laborat√≥rio

- Planilhas de campo

## Boas pr√°ticas

1. Fa√ßa um **estudo piloto**

2. Prepare suas planilhas / caderno **antes** de come√ßar.

3. Anote observa√ß√µes sobre **tudo** o que desviar do protocolo. N√£o, voc√™ n√£o vai lembrar depois.

4. **Backup, backup, backup**:

. . .
    
- Dados anal√≥gicos: 
    
    - Ao final de cada dia/sess√£o, **fotografe** seu caderno / planilha de campo.
    
    - Se houver acesso √† internet, j√° sincronize com a nuvem.
        
## Boas pr√°ticas 

1. Fa√ßa um **estudo piloto**

2. Prepare suas planilhas / caderno **antes** de come√ßar.

3. Anote observa√ß√µes sobre **tudo** o que desviar do protocolo. N√£o, voc√™ n√£o vai lembrar depois.

4. **Backup, backup, backup**:        
   
- Dados digitais:
    
    - Baixe com a maior frequencia poss√≠vel.
        
    - Mantenha pelo menos duas c√≥pias, em dois dispositivos diferentes. 
        
    - Se houver acesso √† internet, j√° sincronize com a nuvem. 

## Boas pr√°ticas

5. Tente digitar os dados o mais r√°pido poss√≠vel - enquanto os detalhes do trabalho ainda est√£o frescos na sua cabe√ßa.

Caderno/planilha vs. coletar dados direto no PC/tablet/telefone?

## Digitando dados

Qual software voc√™ usa pra digitar seus dados?

::: {.incremental}

- Excel: cuidado com a formata√ß√£o dos dados

- Datas e horas: [formato ISO8601](https://en.wikipedia.org/wiki/ISO_8601)

- Separadores decimais e de milhar: v√≠rgula ou ponto?

- Indicadores de dado faltante (*missing data*)

:::

# Exemplo 1 - Preparando uma planilha para receber dados

# Exemplo 2 - Idenfique e corrija os problemas

## *Tidy* data

Boa parte do trabalho de an√°lise de dados consiste na organiza√ß√£o / limpeza de dados.

**Tidy Data:**
[https://www.jstatsoft.org/article/view/v059i10](https://www.jstatsoft.org/article/view/v059i10)

- Cada vari√°vel √© uma coluna

- Cada observa√ß√£o √© uma linha

## Exemplo

| Local     | 2023  | 2024  | 2025 |
|-----------|-------|-------|------|
| Fazenda A | 12/50 | 13/45 | 9/52 |
| Fazenda B | 8/35  | 10/40 | 7/38 |
| Fazenda C | 8/42  | 5/37  | 3/51 |

: Tabela 1. N√∫mero de fatalidades em rela√ß√£o ao n√∫mero de animais infectados, para tr√™s diferentes fazendas entre 2023-2025.  

Quantas vari√°veis tem essa tabela?

## Exemplo 

::: {.incremental}

- Local/Fazenda
- Ano
- N√∫mero de animais infectados
- N√∫mero de fatalidades
:::

. . . 

Como organizar essa tabela de maneira *tidy*?

## Exemplo

| Local     | ano  | infectado | fatalidade |
|-----------|------|-----------|------------|
| Fazenda A | 2023 | 50        | 12         |
| Fazenda A | 2024 | 45        | 13         |
| Fazenda A | 2025 | 52        | 9          |
| Fazenda B | 2023 | 35        | 8          |
| Fazenda B | 2024 | 40        | 10         |
| Fazenda B | 2025 | 38        | 7          |
| Fazenda C | 2023 | 42        | 8          |
| Fazenda C | 2024 | 37        | 5          |
| Fazenda C | 2025 | 51        | 3          |


## Discuss√£o em pares

- Que dados voc√™ est√° coletado / planeja coletar?
- Como esses dados est√£o sendo organizados e armazenados?
- Coomo voc√™ acha que pode melhorar essa organiza√ß√£o?
- Se o seu computador desaparecer agora, o que aconteceria com o seu trabalho?


# Pr√°tica: Configurando o RStudio para trabalhar

## Projetos no RStudio

Uma parte **essencial** da an√°lise de dados √© a estrutura√ß√£o de um *projeto*:

- Conjunto de pastas que organiza o trabalho

- Ajuda na auto-documenta√ß√£o do projeto

- Diferentes an√°lises - diferentes projetos


## Organiza√ß√£o m√≠nima de um projeto:

```
meu_projeto
    |_____ src
    |_____ data
    |        |_____ raw
    |        |_____ processed
    |_____ outputs
    |_____ docs

```

## Organiza√ß√£o m√≠nima de um projeto:

```
meu_projeto
    |_____ scripts
    |_____ dados
    |        |_____ brutos
    |        |_____ processados
    |_____ resultados
    |_____ notas

```

## Boas pr√°ticas de nomenclatura de pastas/arquivos

- sem letras mai√∫sculas
- sem acentos
- sem espa√ßos 
- usar somente `-` e `_` como caracteres extra

## Estilos de nomenclatura de pastas/arquivos/vari√°veis

**Snake case:** `meu_lindo_arquivo.txt`

**Kebab case:** `meu-lindo-arquivo.txt`

**Camel case:** `meuLindoArquivo.txt`

**Pascal case:** `MeuLindoArquivo.txt`

Escolha sua favorita - mas seja **consistente**!

# Exemplo: criando um projeto no RStudio



## Armazenando Dados

::: {.incremental}

Qual o melhor formato para armazenamento de dados estruturados?

- Excel (xls, xlsx): incluem informa√ß√µes sobre o tipo de dado, mas n√£o √© um formato universal. 

- Texto (csv, tsv): extremamente simples, universalmente acess√≠veis, mas n√£o guardam informa√ß√£o sobre o tipo de dado.

- [Parquet](https://parquet.apache.org/): formato aberto desenvolvido especialmente para armazenamento eficiente de dados. Recemente se tornou  padr√£o em data science - mas j√° est√° sendo substitu√≠do.

:::

## Armazenando Dados

Arquivos `RDS` e `RData`

- Formato interno do R.
- RData pode armazenar m√∫ltiplos objetos, RDS somente um objeto.
- Formatos que s√≥ s√£o entendidos pelo R.
- OK para salvar dados intermedi√°rios durante o processamento.

## Armazenando Dados

E dados n√£o-estruturados?

::: {.incremental}

- Priorize formatos abertos

- Use texto simples para os metadados

- Dados de texto n√£o estruturados: JSON

:::

## Lendo dados no R

Exemplo pr√°tico: lendo diferentes tipos de arquivos para o R.

Passo 1: preparando o arquivo `plot_florestal.xslx`

## Excel

Pacote: `readxl()` (parte do `tidyverse`)

Fun√ß√µes: `read_xls()` e `read_xlsx()`

Help: [https://readxl.tidyverse.org/reference/read_excel.html](https://readxl.tidyverse.org/reference/read_excel.html)

## C√≥digo

```{r, florestplotnoeval, echo=TRUE, eval=FALSE}
library(readxl)
plot_florestal <- read_xlsx('../data/plot_florestal.xlsx')
head(plot_florestal)
str(plot_florestal)
glimpse(plot_florestal)
```

## Resultado {visibility="hidden"}
\footnotesize

```{r, florestplotres}
library(readxl)
library(dplyr)
plot_florestal <- read_xlsx('../data/plot_florestal.xlsx')
head(plot_florestal)
glimpse(plot_florestal)
```

# Desafio: como ler a seguda planilha do arquivo excel?

## Texto Simples (CSV, TSV, etc)

R b√°sico: `read.csv()`, `read.csv2()`,`read.delim()`,`read.table()`

Tidyverse (pacote `readr`): `read_csv()`, `read_csv2()`, `read_tsv()`, `read_delim()`

## C√≥digo

```{r, readcsvnoeval, echo=TRUE, eval=FALSE}
library(readr)
turb_dados <- read_csv('../data/turbidez.csv')
head(turb_dados)
glimpse(turb_dados)
```

## Resultado {visibility="hidden"}

```{r, readcsveval}
library(readr)
turb_dados <- read_csv('../data/turbidez.csv')
head(turb_dados)
glimpse(turb_dados)
```

## Vantages e desvantagens

Excel: 
- Inclui informa√ß√£o sobre o *data type* de cada coluna
- Tamanho de arquivo √© maior
- N√£o √© leg√≠vel sem ter o Excel instalado
- Quem garante que daqui a 10 anos esse formato ainda vai existir?

Texto:
- N√£o inclui informa√ß√£o sobre os *data types*
- Arquivos menores
- Qualquer software √© capaz de abrir/ler

## Um detalhe sobre texto

Qualquer arquivo digital √© armazenado internamente como n√∫meros (bits).

Como representar texto como n√∫meros?

. . .

**Encoding:** padr√£o que define como cada caractere √© representado por um n√∫mero

## ASCII vs UTF-8 vs outros

Os primeiros computadores tinham muito pouca mem√≥ria/disco.

ASCII: encoding mais b√°sico, s√≥ inclui 128 caracteres (7-bit encoding)

##

![](../figs/ascii_table.jpeg){fig-align="center"}

## ASCII vs UTF-8 vs outros

**UTF-8**: usa um m√©todo diferente (variable length encoding) e por isso √© capaz de armazenar at√© 1.1 milh√£o de caracteres.
    - Multiplas l√≠nguas
    - S√≠mbolos
    - Emojis
    - Etc...
    
 Existem muitos outros...
 
## ASCII vs UTF-8 vs outros
 
 Se voc√™ tenta ler um arquivo criado com um certo encoding, especificado um encoding diferente, o resultado pode ser estranho:
 
```{r writeutf8, echo=TRUE}
# Gravando um arquivo em UTF-8 
con <- file("exemplo_utf8.txt", open = "w", encoding = "UTF-8")
writeLines("Ma√ß√£, caf√©, rom√£, p√™ra, üòä", con)
close(con)
```
## ASCII vs UTF-8 vs outros
```{r readutf8, echo=TRUE}
# Lendo como UTF-8
con <- file("exemplo_utf8.txt", open = "r", encoding = "UTF-8")
content <- readLines(con, warn = FALSE)
close(con)
content
```
## ASCII vs UTF-8 vs outros
```{r readascii, echo=TRUE}
# Lendo como ASCII
con <- file("exemplo_utf8.txt", open = "r", encoding = "ASCII")
content <- readLines(con, warn = FALSE)
close(con)
content
```
 
 